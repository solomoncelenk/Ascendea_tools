<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ascendea Tools Hub</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; background:#fafafa; }
    h1 { margin-bottom: 8px; }
    #status { color:#555; margin: 6px 0 18px; }
    ul { list-style: none; padding: 0; }
    li { margin: 10px 0; }
    a { text-decoration: none; font-size: 18px; }
    a:hover { text-decoration: underline; }
    code { background:#eee; padding:2px 6px; border-radius:4px; }
  </style>
</head>
<body>
  <h1>Ascendea Tools</h1>
  <div id="status">Loading HTML toolsâ€¦</div>
  <ul id="list"></ul>

  <script>
    const OWNER  = "solomonclenk";
    const REPO   = "Ascendea_tools";   // note exact case
    const BRANCH = "main";

    const base = `https://api.github.com/repos/${OWNER}/${REPO}/contents`;
    const headers = { "Accept": "application/vnd.github+json" };

    async function listDir(path="") {
      const url = `${base}/${path}?ref=${encodeURIComponent(BRANCH)}`;
      const res = await fetch(url, { headers });
      if (!res.ok) throw new Error(`API ${res.status} on ${url}`);
      return res.json();
    }

    async function crawl(path="") {
      const entries = await listDir(path);
      let files = [];
      for (const e of entries) {
        if (e.type === "dir") {
          const sub = await crawl(e.path);
          files = files.concat(sub);
        } else if (e.type === "file") {
          files.push(e.path);
        }
      }
      return files;
    }

    (async function () {
      const status = document.getElementById("status");
      const list = document.getElementById("list");
      try {
        let files = await crawl("");
        files = files
          .filter(p => p.toLowerCase().endsWith(".html"))
          .filter(p => p.toLowerCase() !== "index.html")
          .sort((a,b) => a.localeCompare(b));

        if (files.length === 0) {
          status.textContent = "No additional HTML files found.";
          return;
        }

        files.forEach(p => {
          const li = document.createElement("li");
          const a = document.createElement("a");
          a.href = p;          // relative link works on project Pages
          a.textContent = p;
          li.appendChild(a);
          list.appendChild(li);
        });
        status.textContent = `Found ${files.length} HTML file(s).`;
      } catch (err) {
        console.error(err);
        status.innerHTML = `Could not load file list. You can still open files directly, e.g. <code>https://${OWNER}.github.io/${REPO}/your_file.html</code>`;
      }
    })();
  </script>
</body>
</html>
